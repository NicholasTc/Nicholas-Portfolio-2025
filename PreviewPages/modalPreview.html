<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Project Modal Preview</title>

<style>
  /* ===== Design tokens (dark base) ===== */
  :root{
    --bg:#0b0f17; --surface:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --line:#1f2a3b; --accent:#60a5fa;
    --radius:16px; --shadow:0 18px 50px rgba(2,6,23,.35); --wrap:980px; --blur:8px;

    /* CTA palette (same as your buttons) */
    --btn-primary:#87a6f3; --btn-primary-ink:#0f172a;
    --btn-dark:#121827; --btn-dark-border:#1e2a3d;
    --btn-glow:0 14px 38px rgba(110,140,255,.22), 0 4px 12px rgba(110,140,255,.12);
  }
  :root[data-theme="light"]{
    --bg:#f7f9fc; --surface:#ffffff; --text:#0b1220; --muted:#5b6b7f; --line:#e5e9f0; --accent:#2563eb;
    --shadow:0 18px 50px rgba(2,6,23,.08);
    --btn-dark:#0f1729; --btn-dark-border:#1f2a3b;
  }

  /* ===== Base ===== */
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
  .wrap{max-width:var(--wrap);margin:48px auto;padding:0 20px}
  .muted{color:var(--muted)}
  h1{font-size:28px;margin:0 0 10px}

  /* ===== Demo card ===== */
  .card{
    background:var(--surface); border:1px solid color-mix(in oklab,var(--line) 60%,transparent);
    border-radius:calc(var(--radius) + 8px); overflow:hidden; box-shadow:var(--shadow);
  }
  .thumb{aspect-ratio:16/9; background:url('https://picsum.photos/1000/560?random=12') center/cover no-repeat;}
  .body{padding:16px}
  .title{font-size:22px;margin:6px 0 10px}
  .chips{display:flex; gap:8px; flex-wrap:wrap}
  .chip{font-size:12px;color:var(--muted);border:1px solid color-mix(in oklab,var(--line) 60%,transparent);padding:4px 10px;border-radius:999px}
  .row{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:14px}

  /* ===== Buttons (light/dark pair) ===== */
  .btn{
    --pad-y:12px; --pad-x:18px;
    position:relative; isolation:isolate; display:inline-flex; align-items:center; justify-content:center;
    padding:var(--pad-y) var(--pad-x); border-radius:999px; border:none; outline:none;
    font-weight:600; letter-spacing:.2px; font-size:16px; cursor:pointer; user-select:none; text-decoration:none;
    background: radial-gradient(120px 120px at var(--mx,50%) var(--my,50%), rgba(255,255,255,.10), transparent 45%);
    transition: transform .18s ease, box-shadow .22s ease, background .2s ease;
  }
  .btn{  /* dark default */
    color:#e9edf8;
    background:
      radial-gradient(120px 120px at var(--mx,50%) var(--my,50%), rgba(255,255,255,.08), transparent 46%),
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.10) 60%),
      var(--btn-dark);
    box-shadow: inset 0 0 0 1px var(--btn-dark-border);
  }
  .btn.primary{
    color:var(--btn-primary-ink);
    background:
      radial-gradient(120px 120px at var(--mx,50%) var(--my,50%), rgba(255,255,255,.18), transparent 46%),
      linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,0) 55%),
      var(--btn-primary);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.35);
    text-shadow: 0 1px 0 rgba(255,255,255,.45);
  }
  .btn:hover{ transform:translateY(-1px) }
  .btn.primary:hover{ box-shadow: var(--btn-glow) }
  .btn:not(.primary):hover{ box-shadow: 0 12px 30px rgba(0,0,0,.35) }
  .btn:active{ transform:translateY(0) scale(.995)}
  .btn:focus-visible{ box-shadow:0 0 0 3px rgba(255,255,255,.10), 0 0 0 6px rgba(120,150,255,.35) }
  .btn .shine{pointer-events:none;position:absolute;inset:1px;border-radius:inherit;overflow:hidden}
  .btn .shine::before{content:"";position:absolute;inset:0;border-radius:inherit;background:linear-gradient(to bottom,rgba(255,255,255,.14),rgba(255,255,255,0) 42%);mix-blend-mode:screen}
  .btn .ripple{position:absolute;border-radius:50%;pointer-events:none;inset:auto;width:12px;height:12px;background:radial-gradient(closest-side,rgba(255,255,255,.45),transparent 65%);transform:translate(-50%,-50%) scale(0);opacity:.7;filter:blur(.2px);animation:ripple .55s ease-out forwards}
  @keyframes ripple{0%{transform:translate(-50%,-50%) scale(0);opacity:.7}100%{transform:translate(-50%,-50%) scale(18);opacity:0}}

  /* ===== Modal ===== */
  dialog.modal{
    width:min(920px, 96vw);
    border:none; padding:0; border-radius:calc(var(--radius) + 6px);
    background:var(--surface); color:var(--text);
    box-shadow:var(--shadow);
    outline:1px solid color-mix(in oklab, var(--line) 60%, transparent);
  }
  dialog::backdrop{ background: color-mix(in oklab, var(--bg) 60%, rgba(0,0,0,.45)) }
  .modal-head{
    display:flex; justify-content:space-between; align-items:center; gap:12px;
    padding:16px 18px; border-bottom:1px solid color-mix(in oklab,var(--line) 60%,transparent)
  }
  .modal-title{margin:0;font-size:22px}
  .modal-sub{margin:4px 0 0; font-size:14px; color:var(--muted)}
  .close{
    border:none; background:transparent; color:var(--muted); font-size:22px; cursor:pointer; border-radius:8px; padding:6px; line-height:1
  }
  .close:focus-visible{ outline:2px solid var(--accent); outline-offset:2px }

  .modal-body{ padding:16px 18px 18px }
  .hero-media{ border-radius:12px; overflow:hidden; border:1px solid color-mix(in oklab,var(--line) 60%,transparent); box-shadow:var(--shadow) }
  .hero-media > img, .hero-media > video{ width:100%; height:auto; display:block }

  .meta{ display:flex; gap:10px; flex-wrap:wrap; margin:12px 0 }
  .pill{ font-size:12px; color:var(--muted); border:1px solid color-mix(in oklab,var(--line) 60%,transparent); padding:4px 10px; border-radius:999px }
  .kpis{ display:flex; gap:10px; flex-wrap:wrap; margin:12px 0 }
  .kpi{ padding:8px 12px; border-radius:10px; background:color-mix(in oklab,var(--surface) 85%, transparent); border:1px solid color-mix(in oklab,var(--line) 60%,transparent); font-weight:700; font-size:14px }
  .kpi small{ display:block; font-weight:500; color:var(--muted); font-size:12px }

  .cols{ display:grid; grid-template-columns: 1.1fr 1fr; gap:16px; margin-top:14px }
  @media (max-width:820px){ .cols{ grid-template-columns:1fr } }

  .panel{
    border:1px solid color-mix(in oklab,var(--line) 60%,transparent);
    border-radius:12px; padding:14px; background:var(--surface)
  }
  .panel h3{ margin:0 0 8px; font-size:18px }
  .panel ul{ margin:0; padding-left:20px }
  .panel li{ margin:6px 0 }

  .modal-actions{
    display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    padding:14px 18px; border-top:1px solid color-mix(in oklab,var(--line) 60%,transparent)
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>Project Card → Modal Preview</h1>
    <p class="muted">Click <strong>Quick-view</strong> to open a detailed project modal. Uses your calm light/dark buttons.</p>

    <!-- Demo Card -->
    <article class="card" aria-labelledby="t1">
      <div class="thumb" role="img" aria-label="GymApp dashboard screenshot"></div>
      <div class="body">
        <div id="t1" class="title">GymApp — Flask + React</div>
        <div class="chips">
          <span class="chip">Flask</span><span class="chip">React</span><span class="chip">SQL</span>
        </div>
        <p class="muted" style="margin:10px 0 0">“-42% query time; added progress predictions.”</p>
        <div class="row">
          <button id="openModal" class="btn"><span class="shine"></span>Quick-view</button>
          <a class="btn primary" href="#"><span class="shine"></span>Live Demo</a>
        </div>
      </div>
    </article>
  </div>

  <!-- Modal -->
  <dialog id="projectModal" class="modal" aria-labelledby="modalTitle" aria-describedby="modalDesc">
    <div class="modal-head">
      <div>
        <h2 id="modalTitle" class="modal-title">GymApp — Flask + React</h2>
        <p id="modalDesc" class="modal-sub">Plan workouts faster; see weekly progress with simple charts.</p>
      </div>
      <button class="close" id="closeModal" aria-label="Close">✕</button>
    </div>

    <div class="modal-body">
      <!-- KPIs & meta -->
      <div class="meta">
        <span class="pill">Role: Full-stack</span>
        <span class="pill">Solo</span>
        <span class="pill">Mar–Jun 2025 (6 weeks)</span>
      </div>
      <div class="kpis">
        <div class="kpi">-42% <small>Query time</small></div>
        <div class="kpi">+18% <small>Weekly active users</small></div>
        <div class="kpi">99.2% <small>API success</small></div>
      </div>

      <!-- Hero -->
      <div class="hero-media" style="margin:12px 0 4px">
        <img src="https://picsum.photos/1400/760?random=22" alt="Dashboard view of GymApp showing progress chart and workout list">
      </div>

      <!-- Content columns -->
      <div class="cols">
        <div class="panel">
          <h3>Problem → Solution</h3>
          <p><strong>Problem.</strong> Users tracked workouts in notes; trends were unclear and history views felt slow.</p>
          <p><strong>Solution.</strong> Flask API with cached aggregates + React client. Composite index for history queries and simple progress predictions.</p>
        </div>

        <div class="panel">
          <h3>Architecture</h3>
          <ul>
            <li>React SPA → REST API (Flask Blueprints)</li>
            <li>MySQL (InnoDB), composite index <code>(user_id, date)</code></li>
            <li>Redis cache for weekly aggregates</li>
            <li>JWT auth; GitHub Actions (pytest, flake8) + Docker</li>
          </ul>
        </div>

        <div class="panel">
          <h3>Decisions & Tradeoffs</h3>
          <ul>
            <li>Server cache over client SWR to centralize invalidation</li>
            <li>Denormalized weekly aggregates → 4× faster trends</li>
            <li>Narrow SELECTs to cut row size on history views</li>
          </ul>
        </div>

        <div class="panel">
          <h3>Challenges & Fixes</h3>
          <ul>
            <li>Slow history p95 → profiling + index + query planner checks</li>
            <li>Inconsistent errors → unified API error envelope + toasts</li>
            <li>Auth edges → refresh tokens & short-lived access tokens</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="modal-actions">
      <a class="btn primary" href="#"><span class="shine"></span>Case Study →</a>
      <a class="btn" href="#"><span class="shine"></span>Repository</a>
    </div>
  </dialog>

<script>
  // Light/dark cursor highlight + ripple for .btn
  (function(){
    const btns = document.querySelectorAll('.btn');
    const setPos = (e, el) => {
      const r = el.getBoundingClientRect();
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - r.left;
      const y = (e.touches ? e.touches[0].clientY : e.clientY) - r.top;
      el.style.setProperty('--mx', x + 'px'); el.style.setProperty('--my', y + 'px');
    };
    btns.forEach(el=>{
      ['mousemove','touchmove'].forEach(ev => el.addEventListener(ev, (e)=>setPos(e, el), {passive:true}));
      el.addEventListener('mouseleave', ()=>{ el.style.removeProperty('--mx'); el.style.removeProperty('--my'); });
      el.addEventListener('click', (e)=>{
        const r = el.getBoundingClientRect();
        const x = (e.clientX ?? (e.touches?.[0]?.clientX)) - r.left;
        const y = (e.clientY ?? (e.touches?.[0]?.clientY)) - r.top;
        const ripple = document.createElement('span');
        ripple.className = 'ripple'; ripple.style.left = x + 'px'; ripple.style.top  = y + 'px';
        el.appendChild(ripple); ripple.addEventListener('animationend', ()=> ripple.remove());
      });
    });
  })();

  // Modal open/close + focus trapping + ESC + backdrop click
  (function(){
    const modal = document.getElementById('projectModal');
    const openBtn = document.getElementById('openModal');
    const closeBtn = document.getElementById('closeModal');
    let lastFocus = null;

    function open(){
      lastFocus = document.activeElement;
      if(modal.showModal){ modal.showModal(); } else { modal.setAttribute('open',''); }
      closeBtn.focus();
    }
    function close(){
      modal.close?.(); modal.removeAttribute('open');
      lastFocus?.focus();
    }

    openBtn.addEventListener('click', open);
    closeBtn.addEventListener('click', close);

    // ESC
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && modal.open) close(); });

    // Click outside dialog contents (backdrop click)
    modal.addEventListener('click', (e)=>{
      const rect = modal.getBoundingClientRect();
      const inside = e.clientX >= rect.left && e.clientX <= rect.right && e.clientY >= rect.top && e.clientY <= rect.bottom;
      if(!inside) close();
    });

    // Basic focus trap
    modal.addEventListener('keydown', (e)=>{
      if(e.key !== 'Tab') return;
      const focusables = modal.querySelectorAll('a[href],button:not([disabled]),textarea,input,select,[tabindex]:not([tabindex="-1"])');
      if(!focusables.length) return;
      const first = focusables[0], last = focusables[focusables.length - 1];
      if(e.shiftKey && document.activeElement === first){ last.focus(); e.preventDefault(); }
      else if(!e.shiftKey && document.activeElement === last){ first.focus(); e.preventDefault(); }
    });
  })();
</script>
</body>
</html>
